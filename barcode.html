<!DOCTYPE html>
<html>
<head>
  <title>Print Barcodes</title>
  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    .label {
      width: 300px;
      height: 150px;
      border: 1px solid #ccc;
      margin: 10px;
      padding: 10px;
      display: inline-block;
      vertical-align: top;
      text-align: center;
      box-sizing: border-box;
      page-break-inside: avoid;
    }

    .label img.logo {
      max-width: 80px;
      margin-bottom: 5px;
    }

    .barcode {
      margin: 5px 0;
    }

    .item-name {
      font-size: 14px;
      margin-top: 4px;
    }

    @media print {
      body {
        margin: 0;
        padding: 0;
      }
      .label {
        page-break-inside: avoid;
      }
    }
  </style>
</head>
<body onload="renderBarcodes()">

<h2>Printing Barcodes...</h2>
<div id="labels-container"></div>

<script>
function renderBarcodes() {
  const urlParams = new URLSearchParams(window.location.search);
  const itemsParam = urlParams.get('items');
  const items = itemsParam ? decodeURIComponent(itemsParam).split(',') : [];

  const container = document.getElementById('labels-container');

  items.forEach(item => {
    const label = document.createElement('div');
    label.className = 'label';

    // Logo
    const logo = document.createElement('img');
    logo.src = 'https://yourdomain.com/logo.png'; // <-- Replace with your logo URL
    logo.className = 'logo';
    label.appendChild(logo);

    // Barcode
    const svg = document.createElement('svg');
    svg.className = 'barcode';
    JsBarcode(svg, item.trim(), { format: "CODE128", width: 2, height: 60, displayValue: false });
    label.appendChild(svg);

    // Item name below barcode
    const name = document.createElement('div');
    name.className = 'item-name';
    name.textContent = item.trim();
    label.appendChild(name);

    container.appendChild(label);
  });

  setTimeout(() => window.print(), 500); // Give the DOM time to render before printing
}
</script>

</body>
</html>
